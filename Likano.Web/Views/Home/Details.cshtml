@model Likano.Infrastructure.Queries.Product.Models.Details.GetProductDetailsResponse

@{
    Layout = "_Layout";
    ViewData["Title"] = Model.Title ?? "პროდუქტის დეტალები";
    var imageSize = "300px";
}

<style>
    .product-details-card {
        background: #fff;
        border-radius: 12px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.07);
        padding: 32px 24px;
        margin-bottom: 32px;
    }

    .product-details-title {
        font-size: 2rem;
        font-weight: 600;
        margin-bottom: 12px;
    }

    .product-details-price {
        font-size: 1.5rem;
        color: #0d6efd;
        font-weight: 500;
        margin-bottom: 16px;
    }

    .product-details-list .list-group-item {
        border: none;
        padding-left: 0;
        padding-right: 0;
        background: transparent;
        font-size: 1rem;
    }

    .product-details-image,
    .product-details-carousel img {
        width: @imageSize;
        height: @imageSize;
        object-fit: cover;
        border-radius: 8px;
        background: #f8f9fa;
        box-shadow: 0 1px 4px rgba(0,0,0,0.04);
    }

    .carousel-control-prev-icon,
    .carousel-control-next-icon {
        background-color: #0d6efd;
        border-radius: 50%;
    }

    .product-details-back {
        margin-top: 24px;
    }
</style>

<div class="container mt-4">
    <div class="row justify-content-center">
        <div class="col-lg-10">
            <div class="product-details-card">
                <div class="row">
                    <div class="col-md-5 d-flex flex-column align-items-center">
                        @if (Model.Images != null && Model.Images.Any())
                        {
                            <div id="productImagesCarousel" class="carousel slide product-details-carousel mb-3" data-bs-ride="carousel" style="width:@imageSize;">
                                <div class="carousel-inner">
                                    @for (int i = 0; i < Model.Images.Count; i++)
                                    {
                                        var img = Model.Images[i];
                                        <div class="carousel-item @(i == 0 ? "active" : "")">
                                            <img src="@img.FileUrl" alt="@img.FileName" />
                                        </div>
                                    }
                                </div>
                                @if (Model.Images.Count > 1)
                                {
                                    <button class="carousel-control-prev" type="button" data-bs-target="#productImagesCarousel" data-bs-slide="prev">
                                        <span class="carousel-control-prev-icon"></span>
                                    </button>
                                    <button class="carousel-control-next" type="button" data-bs-target="#productImagesCarousel" data-bs-slide="next">
                                        <span class="carousel-control-next-icon"></span>
                                    </button>
                                }
                            </div>
                        }
                        else if (!string.IsNullOrEmpty(Model.ProductImageUrl))
                        {
                            <img src="@Model.ProductImageUrl" class="product-details-image mb-3" alt="@Model.Title" />
                        }
                        else
                        {
                            <img src="~/images/no-image.png" class="product-details-image mb-3" alt="No image" />
                        }
                    </div>
                    <div class="col-md-7">
                        <div class="product-details-title">@Model.Title</div>
                        <p class="text-muted">@Model.Description</p>
                        <div class="product-details-price">@Model.Price?.ToString("N2") ₾</div>
                        <p>
                            <strong>კოდი:</strong> @Model.Code
                        </p>
                        <p>
                            <strong>მდგომარეობა:</strong>
                            @if (Model.IsAvailable == true)
                            {
                                <span class="badge bg-success">მარაგშია</span>
                            }
                            else
                            {
                                <span class="badge bg-danger">არ არის მარაგში</span>
                            }
                        </p>
                        <ul class="list-group list-group-flush product-details-list mb-3">
                            <li class="list-group-item"><strong>კატეგორია:</strong> @Model.Category?.Name</li>
                            <li class="list-group-item"><strong>ბრენდი:</strong> @Model.Brand?.Name</li>
                            <li class="list-group-item"><strong>წარმოების ქვეყანა:</strong> @Model.ProducerCountry?.Name</li>
                            <li class="list-group-item"><strong>ფერი:</strong> @Model.Color</li>
                            <li class="list-group-item"><strong>სიგრძე:</strong> @Model.Length</li>
                            <li class="list-group-item"><strong>სიგანე:</strong> @Model.Width</li>
                            <li class="list-group-item"><strong>სიმაღლე:</strong> @Model.Height</li>
                            <li class="list-group-item"><strong>დამატების თარიღი:</strong> @Model.CreateDate?.ToString("yyyy-MM-dd")</li>
                        </ul>
                        <div class="mb-2">
                        </div>
                        <div class="product-details-back">
                            <a href="@Url.Action("Index", "Home")" class="btn btn-outline-secondary">უკან დაბრუნება</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>